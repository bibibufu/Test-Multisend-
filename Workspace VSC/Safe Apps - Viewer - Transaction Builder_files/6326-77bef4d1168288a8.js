(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6326],{10495:function(n,e,t){"use strict";var r=t(26042),o=t(69396),i=t(99534),a=t(10253),s=t(85893),l=t(87536),d=t(15861),c=t(15949),u=t(36272),m=t(16849),f=t(54940),v=t(22182),p=(0,c.D)({stringify:function(n){return n.name+" "+n.label}});e.Z=function(n){var e,t=n.name,c=(0,i.Z)(n,["name"]),Z=(0,m.Z)(),x=(0,l.Gc)(),b=x.setValue,h=x.control,j=(0,l.qo)({name:t,control:h}),k=Object.entries(Z).map((function(n){var e=(0,a.Z)(n,2);return{label:e[0],name:e[1]}}));return(0,s.jsx)(u.Z,{value:j||"",disabled:c.disabled,readOnly:null===(e=c.InputProps)||void 0===e?void 0:e.readOnly,freeSolo:!0,options:k,onInputChange:function(n,e){return b(t,e,{shouldValidate:!0})},filterOptions:p,componentsProps:{paper:{elevation:2}},renderOption:function(n,e){return(0,s.jsx)(d.Z,(0,o.Z)((0,r.Z)({component:"li",variant:"body2"},n),{children:(0,s.jsx)(v.Z,{address:e.label,name:e.name,shortAddress:!1})}))},renderInput:function(n){return(0,s.jsx)(f.Z,(0,o.Z)((0,r.Z)({},n,c),{name:t}))}})}},19502:function(n,e,t){"use strict";var r=t(26042),o=t(69396),i=t(99534),a=t(85893),s=t(67294);e.Z=function(n){var e=n.src,t=n.fallbackSrc,l=(0,i.Z)(n,["src","fallbackSrc"]),d=(0,s.useState)(!1),c=d[0],u=d[1];return(0,a.jsx)("img",(0,o.Z)((0,r.Z)({},l),{alt:l.alt,src:c?t:e,onError:function(){return u(!0)}}))}},38042:function(n,e,t){"use strict";var r=t(85893),o=t(19502),i=t(61641),a=t.n(i);e.Z=function(n){var e=n.logoUri,t=n.tokenSymbol,i=n.size,s=void 0===i?26:i,l=n.fallbackSrc;return e?(0,r.jsx)(o.Z,{src:e,alt:t,fallbackSrc:l||"/images/common/token-placeholder.svg",height:s,className:a().image}):null}},40716:function(n,e,t){"use strict";var r=t(85893),o=t(99226),i=t(15861),a=t(24162),s=t(89697),l=t.n(s),d=t(91922),c=t(22182);e.Z=function(){var n=(0,d.Z)();return(0,r.jsxs)(o.Z,{className:l().container,pb:2,mb:2,children:[(0,r.jsx)(i.Z,{color:function(n){return n.palette.text.secondary},pb:1,children:"Sending from"}),(0,r.jsx)(i.Z,{variant:"body2",component:"div",children:(0,r.jsx)(c.Z,{address:n,shortAddress:!1,hasExplorer:!0,showCopyButton:!0})}),(0,r.jsx)(a.Z,{className:l().arrow})]})}},3085:function(n,e,t){"use strict";var r=t(85893),o=t(99226),i=t(15861),a=t(22182);e.Z=function(n){var e=n.address,t=n.title,s=void 0===t?"Recipient":t;return(0,r.jsxs)(o.Z,{mb:3,children:[(0,r.jsx)(i.Z,{color:function(n){return n.palette.text.secondary},mb:1,children:s}),(0,r.jsx)(i.Z,{variant:"body2",component:"div",children:(0,r.jsx)(a.Z,{address:e,shortAddress:!1,hasExplorer:!0,showCopyButton:!0})})]})}},96326:function(n,e,t){"use strict";t.d(e,{v:function(){return q},Z:function(){return z}});var r=t(85893),o=t(99226),i=t(55019),a=t.n(i),s=t(24939),l=t(38042),d=t(47568),c=t(10253),u=t(34051),m=t.n(u),f=t(67294),v=t(83321),p=t(6514),Z=t(15861),x=t(40716),b=t(3085),h=t(2120),j=t(83355),k=t(81511),g=t(3948),y=t(94232),S=t(73936),I=function(n){var e=(0,S.ZP)(),t=(0,k.$6)(),r=(0,c.Z)((0,y.Z)((function(){if(t)return(0,g.L4)(e,t.getSigner()).estimateGas.executeAllowanceTransfer(n.safeAddress,n.token,n.to,n.amount,n.paymentToken,n.payment,n.delegate,n.signature)}),[t,e,n]),3);return{gasLimit:r[0],gasLimitError:r[1],gasLimitLoading:r[2]}},_=t(18608),w=t(61744),A=t(68651),E=t(84177),L=t(9434),P=t(91692),T=t(74727),D=t(48383),C=t(84295),U=t(62687),N=function(n){var e=n.params,t=n.onSubmit,o=(0,f.useState)(!0),i=o[0],a=o[1],s=(0,f.useState)(),l=s[0],u=s[1],g=(0,S.ZP)(),y=(0,T.U)(),N=(0,k.$6)(),V=(0,E.Z)().safeAddress,F=(0,h.Z)().balances.items.find((function(n){return n.tokenInfo.address===e.tokenAddress})),O=(0,j.Z)(null===F||void 0===F?void 0:F.tokenInfo),R=(0,f.useMemo)((function(){return{safeAddress:V,token:(null===O||void 0===O?void 0:O.token)||A.ZERO_ADDRESS,to:e.recipient,amount:(0,w.vz)(e.amount,null===F||void 0===F?void 0:F.tokenInfo.decimals).toString(),paymentToken:A.ZERO_ADDRESS,payment:0,delegate:(null===O||void 0===O?void 0:O.beneficiary)||A.ZERO_ADDRESS,signature:A.EMPTY_DATA}}),[e.amount,e.recipient,V,null===O||void 0===O?void 0:O.beneficiary,null===O||void 0===O?void 0:O.token,null===F||void 0===F?void 0:F.tokenInfo.decimals]),M=I(R),z=M.gasLimit,W=M.gasLimitLoading,$=(0,c.Z)((0,_.uO)({gasLimit:z,nonce:e.txNonce}),2),K=$[0],G=$[1],B=function(){var n=(0,d.Z)(m().mark((function n(e){var r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),N){n.next=3;break}return n.abrupt("return");case 3:return(0,U.zj)(U.L9.USE_SPENDING_LIMIT),a(!1),u(void 0),r=(0,C.$6)(K,y),n.prev=7,n.next=10,(0,D.dispatchSpendingLimitTxExecution)(R,r,g,N);case 10:t(),n.next=18;break;case 13:n.prev=13,n.t0=n.catch(7),(0,L.H)(L.D1._801,n.t0.message),a(!0),u(n.t0);case 18:case"end":return n.stop()}}),n,null,[[7,13]])})));return function(e){return n.apply(this,arguments)}}(),H=!i||W;return(0,r.jsx)("form",{onSubmit:B,children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(Z.Z,{variant:"body2",mb:4,children:"Spending limit transactions only appear in the interface once they are successfully processed and indexed. Pending transactions can only be viewed in your signer wallet application or under your wallet address on a Blockchain Explorer."}),F&&(0,r.jsx)(q,{amount:e.amount,tokenInfo:F.tokenInfo}),(0,r.jsx)(x.Z,{}),(0,r.jsx)(b.Z,{address:e.recipient}),(0,r.jsx)(_.ZP,{params:K,willExecute:!0,nonceReadonly:!1,onFormSubmit:G}),l&&(0,r.jsx)(P.Z,{error:l,children:"Error submitting the transaction. Please try again."}),(0,r.jsx)(Z.Z,{variant:"body2",color:"primary.light",textAlign:"center",mt:3,children:"You're about to create a transaction and will need to confirm it with your currently connected wallet."}),(0,r.jsx)(v.Z,{variant:"contained",type:"submit",disabled:H,children:"Submit"})]})})},V=t(1258),F=t(59737),O=t(80094),R=function(n){var e=n.params,t=n.onSubmit,o=(0,h.Z)().balances,i=(0,O.Z)().createTx,a=o.items.find((function(n){return n.tokenInfo.address===e.tokenAddress})),s=(null===a||void 0===a?void 0:a.tokenInfo)||{},l=s.decimals,d=s.address,u=(0,c.Z)((0,y.Z)((function(){if(d&&l){var n=(0,F.d)(e.recipient,e.amount,l,d);return i(n,e.txNonce)}}),[e,l,d,i]),2),m=u[0],f=u[1];return(0,r.jsxs)(V.Z,{safeTx:m,onSubmit:t,error:f,children:[a&&(0,r.jsx)(q,{amount:e.amount,tokenInfo:a.tokenInfo}),(0,r.jsx)(x.Z,{}),(0,r.jsx)(b.Z,{address:e.recipient})]})},M=t(13162),q=function(n){var e=n.amount,t=n.tokenInfo,i=n.children;return(0,r.jsxs)(o.Z,{className:a().tokenPreview,children:[(0,r.jsx)(o.Z,{className:a().tokenIcon,children:(0,r.jsx)(l.Z,{logoUri:t.logoUri,tokenSymbol:t.symbol})}),(0,r.jsxs)(o.Z,{mt:1,fontSize:20,children:[i,(0,M.HY)(e,t.decimals)," ",t.symbol]})]})},z=function(n){var e=n.params,t=n.onSubmit;return e.type===s.oU.spendingLimit?(0,r.jsx)(N,{params:e,onSubmit:t}):(0,r.jsx)(R,{params:e,onSubmit:t})}},24939:function(n,e,t){"use strict";t.d(e,{hN:function(){return Q},m:function(){return o},oU:function(){return r},ZP:function(){return X}});var r,o,i=t(14924),a=t(26042),s=t(69396),l=t(85893),d=t(87536),c=t(83321),u=t(94054),m=t(86886),f=t(47312),v=t(18972),p=t(18360),Z=t(15861),x=t(6514),b=t(99226),h=t(53219),j=t(2593),k=t(38042),g=t(46794),y=t(6146),S=t(10495),I=t(87109),_=t(23795),w=function(n){var e=n.children,t=n.onClick,r=n.disabled,o=void 0!==r&&r,i=n.position,a=void 0===i?"end":i;return(0,l.jsx)(I.Z,{position:a,children:(0,l.jsx)(_.Z,{type:"button",component:"button",onClick:function(n){n.preventDefault(),t()},sx:o?{visibility:"hidden"}:void 0,children:e})})},A=t(40716),E=t(50480),L=t(36872),P=t(68061),T=function(n){var e=n.availableAmount,t=n.selectedToken,i=(0,d.Gc)().control,c=(0,g.kV)(e,null===t||void 0===t?void 0:t.decimals);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.Z,{children:"Send as"}),(0,l.jsx)(u.Z,{children:(0,l.jsx)(d.Qr,{rules:{required:!0},control:i,name:o.type,render:function(n){var e=n.field;return(0,l.jsxs)(P.Z,(0,s.Z)((0,a.Z)({},e),{defaultValue:r.multiSig,children:[(0,l.jsx)(E.Z,{value:r.multiSig,label:"Multisig Transaction",control:(0,l.jsx)(L.Z,{}),componentsProps:{typography:{variant:"body2"}}}),(0,l.jsx)(E.Z,{value:r.spendingLimit,label:"Spending Limit Transaction (".concat(c," ").concat(null===t||void 0===t?void 0:t.symbol,")"),control:(0,l.jsx)(L.Z,{}),componentsProps:{typography:{variant:"body2"}}})]}))}})})]})},D=t(83355),C=t(3085),U=t(16849),N=t(82919),V=t(73936),F=t(41117),O=t(92924),R=t(47568),M=t(10253),q=t(34051),z=t.n(q),W=t(81511),$=t(94232),K=t(11466),G=t(8198),B=function(){var n=(0,V.ZP)(),e=(0,W.tM)();return(0,M.Z)((0,$.Z)((0,R.Z)(z().mark((function t(){var r,o,i;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,N.W)(n),o=new K.CH(r,new G.vU(["function paused() public view virtual returns (bool)"]),e),t.prev=3,t.next=6,o.paused();case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),i=!1;case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,null,[[3,9]])}))),[n,e]),1)[0]},H=t(21447),Y=t(20789),Q=function(n){return(0,l.jsxs)(m.ZP,{container:!0,alignItems:"center",gap:1,children:[(0,l.jsx)(k.Z,{logoUri:n.tokenInfo.logoUri,tokenSymbol:n.tokenInfo.symbol}),(0,l.jsxs)(m.ZP,{item:!0,xs:!0,children:[(0,l.jsx)(Z.Z,{variant:"body2",children:n.tokenInfo.name}),(0,l.jsxs)(Z.Z,{variant:"caption",component:"p",children:[(0,g.Mb)(n.balance,n.tokenInfo.decimals)," ",n.tokenInfo.symbol]})]})]})};!function(n){n.multiSig="multiSig",n.spendingLimit="spendingLimit"}(r||(r={})),function(n){n.recipient="recipient",n.tokenAddress="tokenAddress",n.amount="amount",n.type="type"}(o||(o={}));var X=function(n){var e,t,m=n.onSubmit,k=n.formData,I=n.disableSpendingLimit,_=void 0!==I&&I,E=(0,Y.I)().balances,L=(0,U.Z)(),P=(0,V.ZP)(),R=(0,N.W)(P),M=B(),q=(0,d.cI)({defaultValues:(t={},(0,i.Z)(t,o.recipient,(null===k||void 0===k?void 0:k[o.recipient])||""),(0,i.Z)(t,o.tokenAddress,(null===k||void 0===k?void 0:k[o.tokenAddress])||""),(0,i.Z)(t,o.amount,(null===k||void 0===k?void 0:k[o.amount])||""),(0,i.Z)(t,o.type,_?r.multiSig:(null===k||void 0===k?void 0:k[o.type])||r.multiSig),t),mode:"onChange",delayError:500}),z=q.register,W=q.handleSubmit,$=q.setValue,K=q.resetField,G=q.watch,X=q.formState.errors,J=q.control,nn=G(o.recipient),en=G(o.tokenAddress),tn=en?E.items.find((function(n){return n.tokenInfo.address===en})):void 0,rn=G(o.type),on=(0,D.Z)(null===tn||void 0===tn?void 0:tn.tokenInfo),an=rn===r.spendingLimit,sn=(0,F.Ki)(R,en),ln=on?j.O$.from(on.amount).sub(on.spent):void 0,dn=sn&&M;return(0,l.jsx)(d.RV,(0,s.Z)((0,a.Z)({},q),{children:(0,l.jsxs)("form",{onSubmit:W(m),children:[(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(A.Z,{}),(0,l.jsx)(u.Z,{fullWidth:!0,sx:{mb:2,mt:1},children:L[nn]?(0,l.jsx)(b.Z,{onClick:function(){return $(o.recipient,"")},children:(0,l.jsx)(C.Z,{address:nn})}):(0,l.jsx)(S.Z,{name:o.recipient,label:"Recipient"})}),(0,l.jsx)(d.Qr,{name:o.tokenAddress,control:J,rules:{required:!0},render:function(n){var e,t=n.fieldState,r=n.field;return(0,l.jsxs)(u.Z,{fullWidth:!0,children:[(0,l.jsx)(f.Z,{id:"asset-label",required:!0,children:"Select an asset"}),(0,l.jsx)(p.Z,(0,s.Z)((0,a.Z)({labelId:"asset-label",label:(null===(e=t.error)||void 0===e?void 0:e.message)||"Select an asset",error:!!t.error},r),{onChange:function(n){r.onChange(n),K(o.amount)},children:E.items.map((function(n){return(0,l.jsx)(v.Z,{value:n.tokenInfo.address,children:(0,l.jsx)(Q,(0,a.Z)({},n))},n.tokenInfo.address)}))}))]})}}),dn&&(0,l.jsxs)(b.Z,{mt:1,display:"flex",alignItems:"center",children:[(0,l.jsx)(h.Z,{component:O.Z,color:"error",fontSize:"small"}),(0,l.jsx)(Z.Z,{variant:"body2",color:"error",ml:.5,children:"$SAFE is currently non-transferable."})]}),!_&&!!ln&&(0,l.jsx)(u.Z,{fullWidth:!0,sx:{mt:2},children:(0,l.jsx)(T,{availableAmount:ln,selectedToken:null===tn||void 0===tn?void 0:tn.tokenInfo})}),(0,l.jsx)(u.Z,{fullWidth:!0,sx:{mt:2},children:(0,l.jsx)(H.Z,(0,a.Z)({label:(null===(e=X.amount)||void 0===e?void 0:e.message)||"Amount",error:!!X.amount,InputProps:{endAdornment:(0,l.jsx)(w,{onClick:function(){if(tn){var n=an&&ln&&ln.lte(tn.balance)?ln.toString():tn.balance;$(o.amount,(0,g.kV)(n,tn.tokenInfo.decimals),{shouldValidate:!0})}},disabled:!tn,children:"Max"})},InputLabelProps:{shrink:!!G(o.amount)},required:!0},z(o.amount,{required:!0,validate:function(n){var e=null===tn||void 0===tn?void 0:tn.tokenInfo.decimals,t=an?null===ln||void 0===ln?void 0:ln.toString():null===tn||void 0===tn?void 0:tn.balance;return(0,y.FV)(n,e,t)||(0,y.vX)(n,e)}})))})]}),(0,l.jsx)(c.Z,{variant:"contained",type:"submit",disabled:dn,children:"Next"})]})}))}},83355:function(n,e,t){"use strict";var r=t(9473),o=t(61329),i=t(6476),a=t(41117);e.Z=function(n){var e=(0,o.Z)();return(0,r.v9)(i.U).find((function(t){return(0,a.Ki)(t.token,null===n||void 0===n?void 0:n.address)&&(0,a.Ki)(t.beneficiary,null===e||void 0===e?void 0:e.address)}))}},59737:function(n,e,t){"use strict";t.d(e,{d:function(){return s},o:function(){return l}});var r=t(46794),o=t(8198),i=t(41117),a=function(n,e){return new o.vU(["function transfer(address to, uint256 value)"]).encodeFunctionData("transfer",[n,e])},s=function(n,e,t,o){var i,s=0===parseInt(o,16),l=(null===(i=(0,r.$_)(e,t))||void 0===i?void 0:i.toString())||"0";return s?{to:n,value:l,data:"0x"}:{to:o,value:"0",data:a(n,l)}},l=function(n,e,t,r){var s=function(n,e,t){return new o.vU(["function safeTransferFrom(address from, address to, uint256 tokenId)"]).encodeFunctionData("safeTransferFrom",[n,e,t])}(n,e,t);return(0,i.Ki)(r,"0x06012c8cf97bead5deae237070f9587f8e7a266d")&&(s=a(e,t)),{to:r,value:"0",data:s}}},61641:function(n){n.exports={image:"styles_image__khM4S"}},89697:function(n){n.exports={container:"styles_container__0nVe2",arrow:"styles_arrow__KASF9"}},55019:function(n){n.exports={container:"styles_container__CTliZ",tokenPreview:"styles_tokenPreview__1btbU",tokenIcon:"styles_tokenIcon__L5kzM"}}}]);
//# sourceMappingURL=6326-77bef4d1168288a8.js.map